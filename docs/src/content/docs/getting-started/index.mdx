---
title: Quick Start with Synapse SDK
description: Learn how to install and use the Synapse SDK.
sidebar:
  order: 0
---

The **Synapse SDK** is your gateway to **Filecoin Onchain Cloud** â€” a decentralized, programmable cloud platform built on Filecoin. This comprehensive guide will walk you through everything you need to know to start building with the SDK.

The Synapse SDK provides an interface to Filecoin's decentralized services ecosystem:

- **ðŸš€ Recommended Usage**: Use the high-level `Synapse` class for a streamlined experience with sensible defaults
- **ðŸ”§ Composable Components**: Import and use individual components for fine-grained control over specific functionality

The SDK handles all the complexity of blockchain interactions, provider selection, and data management, so you can focus on building your application.

### What You'll Learn

By the end of this guide, you'll understand how to:

- Install and configure the Synapse SDK
- Connect to Filecoin networks (mainnet and calibration)
- Manage payments and allowances
- Upload and download data with Synapse SDK
- Use advanced features like CDN and custom providers

## Prerequisites

Before installing the Synapse SDK, make sure you have the following:

- **[Node.js](https://nodejs.org/en) 20 or higher** installed.
- A **supported package manager** (npm, yarn, or pnpm).
- Added [Filecoin **Calibration**](https://chainlist.org/chain/314159) into you MetaMask.

### Get Test Tokens

Before you start building with Synapse SDK, you'll need to request test tokens from faucets to pay transaction fees and storage fees. For the calibration testnet:

**Get tFIL tokens:**

- Visit the [Filecoin Calibration Faucet](https://faucet.calibnet.chainsafe-fil.io/funds.html)
- Enter your wallet address to receive free tFIL tokens
- You need FIL for gas fees

**Get test USDFC tokens:**

- Visit the [Filecoin Calibration USDFC Faucet](https://forest-explorer.chainsafe.dev/faucet/calibnet_usdfc)
- Enter your wallet address to receive free test USDFC tokens
- You need USDFC for storage payments

## Installation

The Synapse SDK requires Node.js 20+ and can be installed via npm, yarn, or pnpm:

```bash
npm install @filoz/synapse-sdk ethers
```

Note: `ethers` v6 is a peer dependency and must be installed separately.

## Quick Start Example

The [`Synapse`](../api/filoz/synapse-sdk/synapse/classes/synapse/) class provides a complete, easy-to-use interface for interacting with Filecoin storage services.

:::note[Keep your private key safe]
Instead of hardcoding `privateKey` in the code, you should always consider to store and access it from `.env` files. And never commit your private key.
:::

Get started with storage in just a few lines of code.

```ts twoslash
import { Synapse, RPC_URLS, TOKENS, TIME_CONSTANTS } from "@filoz/synapse-sdk";
import { ethers } from "ethers";

/**
 * Main function to execute the storage workflow
 */
async function main() {
  try {
    // 1. Initialize SDK with your private key and RPC endpoint
    console.log("1) Initializing SDK...");
    const synapse = await Synapse.create({
      privateKey: "YOUR_PRIVATE_KEY",
      rpcURL: RPC_URLS.calibration.websocket,
    });

    console.log("âœ… SDK initialized successfully!");
    console.log(`Connected to network: ${synapse.getNetwork()}\n`);

    // 2. Check current USDFC balance
    console.log("2) Checking wallet balance...");
    const walletBalance = await synapse.payments.walletBalance(TOKENS.USDFC);
    const formattedBalance = ethers.formatUnits(walletBalance, 18);
    console.log(`Wallet USDFC balance: ${formattedBalance} USDFC\n`);

    // Validate sufficient balance before proceeding
    const depositAmount = ethers.parseUnits("5", 18);

    // 3. Deposit USDFC for payment
    console.log(`3) Depositing 5 USDFC tokens to the Filecoin Pay contract...`);
    const depositTx = await synapse.payments.depositWithPermit(
      depositAmount,
      TOKENS.USDFC
    );

    await depositTx.wait();
    console.log(`âœ… USDFC deposit successful!`);

    // 4. Approve Warm Storage service for payment
    console.log("4) Approving Warm Storage service...");
    const warmStorageAddress = synapse.getWarmStorageAddress();
    console.log(`Warm Storage address: ${warmStorageAddress}`);

    const approveTx = await synapse.payments.approveService(
      warmStorageAddress,
      ethers.parseUnits("10", 18), // Rate allowance: 10 USDFC per epoch and you can change this accordingly
      ethers.parseUnits("1000", 18), // Lockup allowance: 1000 USDFC total
      TIME_CONSTANTS.EPOCHS_PER_MONTH // Max lockup period: 30 days (in epochs)
    );

    const approveReceipt = await approveTx.wait();
    console.log(`âœ… Service approval complete!`);

    // 5. Upload data - SDK automatically selects provider and creates data set if needed
    console.log("5) Uploading data to decentralized storage...");
    const dataBytes = new TextEncoder().encode(
      "ðŸš€ Welcome to decentralized storage on Filecoin Onchain Cloud! Your data is safe here. ðŸŒ You will be able to use Synapse SDK to access full FOC features, such Filecoin warm storage serivce, Filecoin pay, Filecoin Beam, etc. "
    );

    const uploadResult = await synapse.storage.upload(dataBytes);
    console.log(`âœ… Upload complete!`);
    console.log(`PieceCID: ${uploadResult.pieceCid}`);
    console.log(`Size: ${uploadResult.size} bytes\n`);

    // 6. Download data from any provider that has it
    console.log("6) Downloading data from storage...");
    const downloadedData = await synapse.storage.download(
      uploadResult.pieceCid
    );
    const decodedText = new TextDecoder().decode(downloadedData);

    console.log(`âœ… Download successful!`);
    console.log(`Downloaded data: ${decodedText}\n`);
    console.log("ðŸŽ‰ Data storage and retrieval successful!");
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    const errorStack = error instanceof Error ? error.stack : undefined;

    console.error("âŒ Error occurred:", errorMessage);
    if (errorStack) {
      console.error("Stack trace:", errorStack);
    }
    process.exit(1);
  }
}

// Execute main function
main();
```

What you just did:

- âœ… Initialized synapse SDK for Filecoin Calibration
- âœ… Deposited USDFC as payment tokens
- âœ… Authorized the storage service to use the token
- âœ… Uploaded data to decentralized storage
- âœ… Retrieved it using only the content address

Now let's break down each step...

### 1: Initialize the SDK

First, set up the Synapse SDK with your credentials. We use wallet priviate key here as an example, but you can definitely inject signer from any wallet providers, such as MetaMask or wallet connect.

```ts twoslash
import { Synapse, RPC_URLS } from "@filoz/synapse-sdk";
// ---cut---
// 1. Initialize SDK with your private key and RPC endpoint
const synapse = await Synapse.create({
  privateKey: "YOUR_PRIVATE_KEY",
  rpcURL: RPC_URLS.calibration.websocket,
});
```

### 2: USDFC Deposit

Before storing data, you need to deposit USDFC tokens in your payments account. The amount you deposit is entirely up to your anticipated storage and retrieval needs. 
:::note[Pricing]
To help you set an appropriate deposit amount, please see the [**Pricing**](../introduction/about/#pricing) section for up-to-date details on storage and retrieval costs.
:::

```ts twoslash
import { Synapse } from "@filoz/synapse-sdk";
const synapse = await Synapse.create({});
import { TOKENS } from "@filoz/synapse-sdk";
import { ethers } from "ethers";
// ---cut---
// 2. Check current USDFC balance
const walletBalance = await synapse.payments.walletBalance(TOKENS.USDFC);
const formattedBalance = ethers.formatUnits(walletBalance, 18);

// Validate sufficient balance before proceeding
const depositAmount = ethers.parseUnits("5", 18);

// 3. Deposit USDFC for payment
const depositTx = await synapse.payments.depositWithPermit(
  depositAmount,
  TOKENS.USDFC
);
await depositTx.wait();
```

### 3: Payment Setup

Approve the storage service to create & manage payment rails on your behalf:

```ts twoslash
import { Synapse, TIME_CONSTANTS } from "@filoz/synapse-sdk";
import { ethers } from "ethers";

const synapse = await Synapse.create({});
// ---cut---
// 4. Approve Warm Storage service for payment
const warmStorageAddress = synapse.getWarmStorageAddress();

const approveTx = await synapse.payments.approveService(
  warmStorageAddress,
  ethers.parseUnits("10", 18), // Rate allowance: 10 USDFC per epoch and you can change this accordingly
  ethers.parseUnits("1000", 18), // Lockup allowance: 1000 USDFC total
  TIME_CONSTANTS.EPOCHS_PER_MONTH // Max lockup period: 30 days (in epochs)
);

await approveTx.wait();
```

### 4: Store and Download Data

Now you can upload data to decentralized storage and retrieve it:

```ts twoslash
import { Synapse } from "@filoz/synapse-sdk";

const synapse = await Synapse.create({});
// ---cut---
// 5. Upload data - SDK automatically selects provider and creates data set if needed
const dataBytes = new TextEncoder().encode(
  "ðŸš€ Welcome to decentralized storage on Filecoin Onchain Cloud! Your data is safe here. ðŸŒ You need to make sure to meet the minimum size requirement of 127 bytes for the storage context."
);
const uploadResult = await synapse.storage.upload(dataBytes);

// 6. Download data from any provider that has it
const downloadedData = await synapse.storage.download(uploadResult.pieceCid);
const decodedText = new TextDecoder().decode(downloadedData);
```

## What's Next?

Congratulations! You've successfully stored and retrieved data using the Synapse SDK. But this is just the beginning - the SDK offers many powerful features for building decentralized applications:

### Key Features

| Category                   | Features                                                         |
| -------------------------- | ---------------------------------------------------------------- |
| ðŸ—„ï¸ **Advanced Storage**    | **CDN Integration**: Enable fast global content delivery         |
|                            | **Metadata Management**: Tag and organize your data              |
|                            | **Batch Operations**: Upload multiple files efficiently          |
| ðŸ’° **Payment Management**  | **Automated Settlements**: Handle payment rails automatically    |
|                            | **Cost Estimation**: Preview storage costs before uploading      |
|                            | **Allowance Management**: Control spending limits                |
| ðŸ› ï¸ **Developer Tools**     | **Session Keys**: Improve user experience with delegated signing |
|                            | **Progress Callbacks**: Track upload/download progress           |
|                            | **Error Handling**: Comprehensive error management               |
| ðŸŒ **Network Integration** | **Provider Discovery**: Find optimal storage providers           |
|                            | **Proof Verification**: Verify data integrity with PDP           |
|                            | **Subgraph Integration**: Query blockchain data efficiently      |

#### Quick Examples

##### Advanced Storage with Contexts

For more control over provider selection and data set management:

```ts twoslash
import { Synapse } from "@filoz/synapse-sdk";
const data = {} as unknown as Uint8Array;
const synapse = await Synapse.create({});
// ---cut---
// Create a storage context with specific provider
const context = await synapse.storage.createContext({
  providerId: 1, // Use specific provider
  withCDN: true, // Enable CDN for faster retrieval
  metadata: {
    category: "documents",
    version: "1.0",
  },
});

// Upload to this specific context
const result = await context.upload(data);

// Download from this context
const downloaded = await context.download(result.pieceCid);
```
- **providerId**: By specifying `providerId`, you tell Synapse SDK to store (and later retrieve) your data specifically with that provider.

- **withCDN**: Setting `withCDN: true` enables **Filecoin Beam**, the decentralized retrieval and delivery layer. So global users can download data faster, and pay-by-egress billing.

- **metadata**: Attach custom key-value pairs to your data set for easy categorization, tagging, or later querying. This metadata is stored on-chain and can be used by apps or indexing systems.

##### Finding Service Providers

```ts twoslash
import { Synapse } from "@filoz/synapse-sdk";
const synapse = await Synapse.create({});
// ---cut---
// Get all approved providers
const storageInfo = await synapse.storage.getStorageInfo();
const providers = storageInfo.providers;

console.log("Available providers:");
providers.forEach((provider) => {
  console.table({
    ID: provider.id,
    Name: provider.name,
    Description: provider.description,
    Active: provider.active,
    ProviderAddress: provider.serviceProvider,
    PDPServiceURL: provider.products.PDP!.data.serviceURL,
  });
});
```

### Explore More

Ready to dive deeper? Check out these comprehensive guides:

- **[Core Concepts](/core-concepts/architecture/)** - Understand the architecture, PDP, and Filecoin Pay protocols
- **[Storage Operations](/developer-guides/storage/)** - Complete guide to uploading, downloading, and managing data sets
- **[Payment Management](/developer-guides/payments/)** - Learn about deposits, approvals, and monitoring costs

#### Developer Resources

- **[Example Application](https://github.com/FIL-Builders/fs-upload-dapp)** - Full-stack upload application

#### API Reference

For complete API documentation, see the [API Reference](/api/filoz/synapse-sdk/readme/) which covers:

- All SDK classes and methods
- TypeScript interfaces and types
- Configuration options
- Error handling patterns

#### Community & Support

- **GitHub**: [Report issues and contribute](https://github.com/FilOzone/synapse-sdk)
- **Slack**: Join the `#fil-builders` on [Filecoin Slack](https://filecoin.io/slac) for help and discussions
- **Telegram**: Join `FIL Builders` on [Telegram](https://t.me/+Xj6_zTPfcUA4MGQ1)
